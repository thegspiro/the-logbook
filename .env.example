# ============================================
# THE LOGBOOK - ENVIRONMENT CONFIGURATION
# ============================================
# This is a template for your .env file.
# Copy this file to .env and update with your actual values.
# NEVER commit .env to version control!

# ============================================
# APPLICATION
# ============================================
APP_NAME=The Logbook
VERSION=1.0.0
ENVIRONMENT=development  # development, staging, production
DEBUG=false
PORT=3001
ENABLE_DOCS=true

# ============================================
# DATABASE - MySQL
# ============================================
DB_HOST=localhost
DB_PORT=3306
DB_NAME=intranet_db
DB_USER=intranet_user
DB_PASSWORD=CHANGE_ME_IN_PRODUCTION_USE_STRONG_PASSWORD
MYSQL_ROOT_PASSWORD=CHANGE_ME_IN_PRODUCTION_USE_STRONG_PASSWORD
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_ECHO=false
DB_CHARSET=utf8mb4

# ============================================
# REDIS CACHE
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_IN_PRODUCTION
REDIS_DB=0
REDIS_TTL=3600

# ============================================
# SECURITY & ENCRYPTION
# ============================================
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=CHANGE_ME_TO_RANDOM_64_CHARACTER_STRING_GENERATE_WITH_SECRETS_MODULE

# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
ENCRYPTION_KEY=CHANGE_ME_TO_64_CHARACTER_HEX_STRING_FOR_AES_256_ENCRYPTION

# JWT Settings
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480  # 8 hours
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60

# ============================================
# CORS - Frontend URLs
# ============================================
ALLOWED_ORIGINS=["http://localhost:3000","http://127.0.0.1:3000"]

# ============================================
# FILE STORAGE
# ============================================
STORAGE_TYPE=local  # local, s3, azure, gcs
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=52428800  # 50 MB in bytes

# AWS S3 (if using S3 storage)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=

# Azure Blob Storage (if using Azure)
AZURE_STORAGE_ACCOUNT=
AZURE_STORAGE_KEY=
AZURE_STORAGE_CONTAINER=

# Google Cloud Storage (if using GCS)
GCS_PROJECT_ID=
GCS_BUCKET=
GCS_CREDENTIALS_PATH=

# ============================================
# EMAIL CONFIGURATION
# ============================================
EMAIL_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM_EMAIL=noreply@yourfiredept.org
SMTP_FROM_NAME=The Logbook

# ============================================
# SMS NOTIFICATIONS (Twilio)
# ============================================
TWILIO_ENABLED=false
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ============================================
# OAUTH & SSO PROVIDERS
# ============================================

# Microsoft / Azure AD
AZURE_AD_ENABLED=false
AZURE_AD_TENANT_ID=
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=

# Google OAuth
GOOGLE_OAUTH_ENABLED=false
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# LDAP / Active Directory
LDAP_ENABLED=false
LDAP_SERVER=ldap://your-ldap-server:389
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=
LDAP_SEARCH_BASE=ou=users,dc=example,dc=com

# ============================================
# MODULE CONFIGURATION
# ============================================
# Enable/disable modules as needed for your organization

# Core Modules (always enabled)
MODULE_USER_MANAGEMENT=true
MODULE_DOCUMENT_MANAGEMENT=true
MODULE_COMMUNICATION=true

# Optional Modules
MODULE_TRAINING_ENABLED=true
MODULE_COMPLIANCE_ENABLED=true
MODULE_SCHEDULING_ENABLED=true
MODULE_INVENTORY_ENABLED=true
MODULE_MEETINGS_ENABLED=true
MODULE_ELECTIONS_ENABLED=false
MODULE_FUNDRAISING_ENABLED=false
MODULE_INCIDENTS_ENABLED=true
MODULE_EQUIPMENT_ENABLED=true
MODULE_VEHICLES_ENABLED=true
MODULE_BUDGET_ENABLED=false

# ============================================
# MONITORING & LOGGING
# ============================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# Sentry Error Tracking (optional)
SENTRY_ENABLED=false
SENTRY_DSN=

# ============================================
# HIPAA COMPLIANCE SETTINGS
# ============================================
HIPAA_AUDIT_RETENTION_DAYS=2555  # 7 years minimum
HIPAA_SESSION_TIMEOUT_MINUTES=15  # Auto-logout for inactive users
HIPAA_ENCRYPT_PHI=true  # Always true in production
HIPAA_MINIMUM_PASSWORD_AGE_DAYS=1
HIPAA_MAXIMUM_PASSWORD_AGE_DAYS=90
HIPAA_PASSWORD_HISTORY_COUNT=12  # Remember last 12 passwords

# ============================================
# DOCKER COMPOSE PORTS
# ============================================
FRONTEND_PORT=3000
BACKEND_PORT=3001
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
ELASTICSEARCH_PORT=9200
MINIO_PORT=9000
MINIO_CONSOLE_PORT=9001
MAILHOG_SMTP_PORT=1025
MAILHOG_UI_PORT=8025

# MinIO S3 Storage (for local development)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# ============================================
# ORGANIZATION DEFAULTS
# ============================================
DEFAULT_ORG_TYPE=fire_department  # fire_department, ems, hospital, clinic
DEFAULT_TIMEZONE=America/New_York
DEFAULT_LANGUAGE=en

# ============================================
# SECURITY HEADERS
# ============================================
ENABLE_HSTS=true  # HTTP Strict Transport Security
ENABLE_CSRF_PROTECTION=true
ENABLE_CONTENT_SECURITY_POLICY=true

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups

# ============================================
# NOTIFICATION SETTINGS
# ============================================
NOTIFICATION_DIGEST_ENABLED=true
NOTIFICATION_DIGEST_TIME="08:00"  # Daily digest at 8 AM
NOTIFICATION_REALTIME_ENABLED=true

# ============================================
# DEVELOPMENT TOOLS
# ============================================
# Only enable in development!
DEV_SEED_DATABASE=false
DEV_ENABLE_PROFILING=false
DEV_MOCK_EMAIL=true
DEV_MOCK_SMS=true

# ============================================
# ADVANCED SECURITY
# ============================================
ENABLE_IP_WHITELIST=false
IP_WHITELIST=["127.0.0.1","10.0.0.0/8"]
ENABLE_GEOFENCING=false
ALLOWED_COUNTRIES=["US","CA"]

# Account Lockout Settings
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Session Security
SECURE_COOKIES=true  # Always true in production
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict

# ============================================
# COMPLIANCE & REGULATIONS
# ============================================
ENABLE_GDPR_FEATURES=false  # EU organizations
ENABLE_CCPA_FEATURES=false  # California organizations
ENABLE_SECTION_508=true     # Accessibility compliance
DATA_RESIDENCY_REGION=US    # US, EU, CA, etc.

# ============================================
# API RATE LIMITING
# ============================================
API_RATE_LIMIT_ENABLED=true
API_RATE_LIMIT_REQUESTS=100
API_RATE_LIMIT_WINDOW_SECONDS=60

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_BETA_UI=false
FEATURE_AI_ASSISTANT=false
FEATURE_MOBILE_APP=false
FEATURE_OFFLINE_MODE=false

# ============================================
# INTEGRATION KEYS
# ============================================
# Add API keys for third-party integrations here

# Google Maps (for location features)
GOOGLE_MAPS_API_KEY=

# Weather API (for incident management)
WEATHER_API_KEY=

# ============================================
# NOTES
# ============================================
# 1. Always use strong, randomly generated passwords in production
# 2. Keep this file secure - it contains sensitive information
# 3. Use environment-specific .env files (.env.production, .env.staging)
# 4. Rotate keys and passwords regularly (at least every 90 days)
# 5. Use a secrets management system (AWS Secrets Manager, HashiCorp Vault) in production
# 6. Never commit .env files to version control
# 7. Document any custom environment variables your organization adds
